{
	"WP Add action": {
		"prefix": "crearPipelineNotificaciones",
		"body": [
			"//variables: $nombrePipeline $nombreArchivo  $pipelineNotificar $usuario",
			"{",
				"\t\"name\": \"$nombrePipeline\",",
				"\t\"type\": \"ExecutePipeline\",",
				"\t\"dependsOn\": [",
					"\t\t{",
						"\t\t\t\"activity\": \"$pipelineNotificar\",",
						"\t\t\t\"dependencyConditions\": [",
							"\t\t\t\t\"Succeeded\",",
							"\t\t\t\t\"Failed\"",
						"\t\t\t]",
					"\t\t}",
				"\t],",
				"\t\"userProperties\": [],",
				"\t\"typeProperties\": {",
					"\t\t\"pipeline\": {",
						"\t\t\t\"referenceName\": \"NotificacionesSlack\",",
						"\t\t\t\"type\": \"PipelineReference\"",
					"\t\t},",
					"\t\t\"waitOnCompletion\": true,",
					"\t\t\"parameters\": {",
						"\t\t\t\"nombreElemento\": {",
							"\t\t\t\t\"value\": \"$nombreArchivo\",",
							"\t\t\t\t\"type\": \"Expression\"",
						"\t\t},",
						"\t\t\t\"idPipeline\": {",
							"\t\t\t\t\"value\": \"@activity('$pipelineNotificar').output['pipelineRunId']\",",
							"\t\t\t\t\"type\": \"Expression\"",
						"\t\t},",
						"\t\t\t\"inicioPipeline\": {",
							"\t\t\t\t\"value\": \"@activity('$pipelineNotificar').ExecutionStartTime\",",
							"\t\t\t\t\"type\": \"Expression\"",
						"\t\t},",
						"\t\t\t\"finPipeline\": {",
							"\t\t\t\t\"value\": \"@activity('$pipelineNotificar').ExecutionEndTime\",",
							"\t\t\t\t\"type\": \"Expression\"",
						"\t\t},",
						"\t\t\t\"duracionPipeline\": {",
							"\t\t\t\t\"value\": \"@activity('$pipelineNotificar').Duration\",",
							"\t\t\t\t\"type\": \"Expression\"",
						"\t\t},",
						"\t\t\t\"responsable\": \"$usuario\",",
						"\t\t\t\"nombrePipeline\": {",
							"\t\t\t\t\"value\": \"@activity('$pipelineNotificar').output['pipelineName']\",",
							"\t\t\t\t\"type\": \"Expression\"",
						"\t\t},",
						"\t\t\t\"estadoPipeline\": {",
							"\t\t\t\t\"value\": \"@activity('$pipelineNotificar').Status\",",
							"\t\t\t\t\"type\": \"Expression\"",
						"\t\t},",
						"\t\t\t\"errorPipeline\": {",
							"\t\t\t\t\"value\": \"@if(empty(activity('$pipelineNotificar').Error?.message), '✅\\n `No hubo errores durante la ejecución.`', concat('⚠\\n', '`', activity('$pipelineNotificar').Error.message, '`'))\",",
							"\t\t\t\t\"type\": \"Expression\"",
						"\t\t\t}",
					"\t\t}",
				"\t}",
			"}"
		],
		"description": "Crear pipeline de notificaciones en ADF"
	},
}